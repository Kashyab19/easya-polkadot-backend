{"version":3,"sources":["../../../../node_modules/@unique-nft/utils/extension.js","../../../../packages/sdk/src/bundles/extension.ts"],"names":["require_extension","__commonJSMin","exports","module","__defProp","Object","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__hasOwnProp","prototype","hasOwnProperty","__export","__name","target","all","name","get","enumerable","__copyProps","to","from","except","desc","key","call","__toCommonJS","mod","value","ExtensionTools_exports","Ethereum","ExtensionTools","Polkadot","UniqueChainName","UniqueChainName2","default","ExtensionTools_default","documentReadyPromiseAndWindowIsOk","window","Promise","resolve","document","readyState","addEventListener","once","windowIsOkSync","ethereum","UNIQUE_CHAINS","UNIQUE_CHAIN_IDS","unique","quartz","opal","sapphire","chainNameToChainId","chainIdToChainName","isUniqueChainFactory","chainName","parseInt","chainId","currentChainIs","byName","includes","Error","anyUniqueChain","getOrRequestAccounts","requestInsteadOfGet","address","error","extensionNotFound","userRejected","needToRequestAccess","accounts","request","method","_error","code","chainIdStr","NaN","getOrRequestAccountsSafe","result","addChainToExtension","chainData","console","log","params","UNIQUE_CHAINS_DATA_FOR_EXTENSIONS","nativeCurrency","symbol","decimals","rpcUrls","iconUrls","blockExplorerUrls","addChain","anyChain","switchToChain","parsedChainId","toString","switchChainTo","subscribeOnChanges","cb","refresh","reason","selectedAddress","getAccounts","then","catch","e","on","removeListener","parseEthersTxReceipt","tx","options","events","filter","event","map","index","args","padStart","keys","isNaN","reduce","acc","rawValue","_isBigNumber","toBigInt","elem","rawPrice","gasUsed","effectiveGasPrice","priceStr","price","parseFloat","slice","join","rawEvents","cumulativeGasUsed","requestAccounts","requestAccountsSafe","getAccountsSafe","IPFS_GATEWAY","KNOWN_POLKADOT_EXTENSIONS","logoIpfsCid","prettyName","webpage","FALLBACK_WALLET_LOGO_IPFS_CID","compareTwoStrings","a","b","knownPolkadotExtensions","entries","info","logo","ipfsCid","url","sort","isWeb3Environment","injectedWeb3","length","getWalletInfo","walletName","nonInjectedWallet","isEnabled","version","listWallets","wallets","extensionFound","enabledWalletsNumber","injectedWallet","wallet","loadWalletByNameSafe","rawWallet","walletInfo","enable","account","addressShort","id","accountName","accountType","type","signRaw","payloadRaw","signer","payload","data","signPayload","payloadJSON","sign","unsignedTxPayload","signatureResult","signerPayloadJSON","signatureType","signature","meta","genesisHash","source","update","loadWalletByName","loadWallets","onlyEnabled","rejectedWallets","accountsNotFound","userHasWalletsButHasNoAccounts","userHasBlockedAllWallets","allWallets","enabled","isBlockedByUser","message","indexOf","flatMap","every","w","loadWalletsSafe","enableAndLoadAllWallets","loadEnabledWallets","enableAndLoadAllWalletsSafe","loadEnabledWalletsSafe","constants","extensionNames","polkadot","subwallet","talisman","extension_exports","__reExport"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/ExtensionTools/index.ts\nvar ExtensionTools_exports = {};\n__export(ExtensionTools_exports, {\n  Ethereum: () => Ethereum,\n  ExtensionTools: () => ExtensionTools,\n  Polkadot: () => Polkadot,\n  UniqueChainName: () => UniqueChainName2,\n  default: () => ExtensionTools_default\n});\nmodule.exports = __toCommonJS(ExtensionTools_exports);\n\n// src/ExtensionTools/utils.ts\nvar documentReadyPromiseAndWindowIsOk = () => {\n  if (typeof window === \"undefined\") {\n    return Promise.resolve(false);\n  } else if (window.document.readyState === \"complete\") {\n    return Promise.resolve(true);\n  } else {\n    return new Promise((resolve) => window.addEventListener(\"load\", () => resolve(true), { once: true }));\n  }\n};\n\n// src/ExtensionTools/ethereum.ts\nvar windowIsOkSync = () => {\n  return typeof window !== \"undefined\" && !!window.ethereum;\n};\nvar UNIQUE_CHAINS = [\"unique\", \"quartz\", \"opal\", \"sapphire\"];\nvar UNIQUE_CHAIN_IDS = [8880, 8881, 8882, 8883];\nvar UniqueChainName = {\n  unique: \"unique\",\n  quartz: \"quartz\",\n  opal: \"opal\",\n  sapphire: \"sapphire\"\n};\nvar chainNameToChainId = {\n  unique: 8880,\n  quartz: 8881,\n  opal: 8882,\n  sapphire: 8883\n};\nvar chainIdToChainName = {\n  8880: \"unique\",\n  8881: \"quartz\",\n  8882: \"opal\",\n  8883: \"sapphire\"\n};\nvar isUniqueChainFactory = (chainName) => () => {\n  if (!windowIsOkSync()) {\n    return false;\n  }\n  const chainId = parseInt(window.ethereum.chainId, 16);\n  return chainId === chainNameToChainId[chainName];\n};\nvar currentChainIs = {\n  unique: isUniqueChainFactory(\"unique\"),\n  quartz: isUniqueChainFactory(\"quartz\"),\n  opal: isUniqueChainFactory(\"opal\"),\n  sapphire: isUniqueChainFactory(\"sapphire\"),\n  byName: (chainName) => {\n    if (!UNIQUE_CHAINS.includes(chainName)) {\n      throw new Error(`Invalid chain name: ${chainName}`);\n    }\n    return isUniqueChainFactory(chainName)();\n  },\n  anyUniqueChain: (chainId) => {\n    if (!chainId)\n      return false;\n    return typeof chainId === \"string\" && UNIQUE_CHAINS.includes(chainId) || typeof chainId === \"number\" && UNIQUE_CHAIN_IDS.includes(chainId);\n  }\n};\nvar getOrRequestAccounts = async (requestInsteadOfGet = false) => {\n  const windowIsOk = await documentReadyPromiseAndWindowIsOk();\n  if (!windowIsOk) {\n    return { address: \"\", chainId: 0 };\n  }\n  if (!window.ethereum) {\n    const error = new Error(\"No extension found\");\n    error.extensionNotFound = true;\n    error.userRejected = false;\n    error.needToRequestAccess = false;\n    error.chainId = null;\n    throw error;\n  }\n  const ethereum = window.ethereum;\n  let accounts = [];\n  let chainId = null;\n  try {\n    accounts = await ethereum.request({ method: requestInsteadOfGet ? \"eth_requestAccounts\" : \"eth_accounts\" });\n    chainId = parseInt(ethereum.chainId, 16);\n  } catch (_error) {\n    const error = _error;\n    error.userRejected = _error.code === 4001;\n    error.extensionNotFound = false;\n    error.needToRequestAccess = false;\n    const chainIdStr = window.ethereum?.chainId;\n    error.chainId = typeof chainIdStr === \"string\" ? parseInt(chainIdStr, 16) : NaN;\n    throw error;\n  }\n  const account = accounts[0];\n  if (!account) {\n    const error = new Error(\"Need to request account\");\n    error.extensionNotFound = false;\n    error.userRejected = false;\n    error.needToRequestAccess = true;\n    error.chainId = chainId;\n    throw error;\n  }\n  return {\n    address: accounts[0],\n    chainId\n  };\n};\nvar getOrRequestAccountsSafe = async (requestInsteadOfGet = false) => {\n  try {\n    return { result: await getOrRequestAccounts(requestInsteadOfGet), error: null };\n  } catch (error) {\n    return { result: null, error };\n  }\n};\nvar addChainToExtension = async (chainData) => {\n  const windowIsOk = await documentReadyPromiseAndWindowIsOk();\n  if (!windowIsOk)\n    return;\n  const ethereum = window.ethereum;\n  if (ethereum.chainId === chainData.chainId) {\n    console.log(`No need to add the chain to wallet - wallet already has ${chainData.chainName}'s chainId: ${ethereum.chainId} (${parseInt(ethereum.chainId)})`);\n    return;\n  }\n  try {\n    await ethereum.request({\n      method: \"wallet_addEthereumChain\",\n      params: [chainData]\n    });\n  } catch (error) {\n    console.error(\"Error during attempt to add chain to wallet\", error.code, error);\n    throw error;\n  }\n};\nvar UNIQUE_CHAINS_DATA_FOR_EXTENSIONS = {\n  unique: {\n    chainId: \"0x22b0\",\n    chainName: \"Unique\",\n    nativeCurrency: {\n      name: \"Unique\",\n      symbol: \"UNQ\",\n      decimals: 18\n    },\n    rpcUrls: [`https://rpc.unique.network`],\n    iconUrls: [`https://ipfs.unique.network/ipfs/QmbJ7CGZ2GxWMp7s6jy71UGzRsMe4w3KANKXDAExYWdaFR`],\n    blockExplorerUrls: [\"https://uniquescan.io/unique/\"]\n  },\n  quartz: {\n    chainId: \"0x22b1\",\n    chainName: \"Quartz by Unique\",\n    nativeCurrency: {\n      name: \"Quartz\",\n      symbol: \"QTZ\",\n      decimals: 18\n    },\n    rpcUrls: [`https://rpc-quartz.unique.network`],\n    iconUrls: [`https://ipfs.unique.network/ipfs/QmaGPdccULQEFcCGxzstnmE8THfac2kSiGwvWRAiaRq4dp`],\n    blockExplorerUrls: [\"https://uniquescan.io/quartz/\"]\n  },\n  opal: {\n    chainId: \"0x22b2\",\n    chainName: \"Opal by Unique\",\n    nativeCurrency: {\n      name: \"Opal\",\n      symbol: \"OPL\",\n      decimals: 18\n    },\n    rpcUrls: [`https://rpc-opal.unique.network`],\n    iconUrls: [`https://ipfs.unique.network/ipfs/QmYJDpmWyjDa3H6BxweFmQXk4fU8b1GU7M9EqYcaUNvXzc`],\n    blockExplorerUrls: [\"https://uniquescan.io/opal/\"]\n  },\n  sapphire: {\n    chainId: \"0x22b3\",\n    chainName: \"Sapphire by Unique\",\n    nativeCurrency: {\n      name: \"Quartz\",\n      symbol: \"QTZ\",\n      decimals: 18\n    },\n    rpcUrls: [`https://rpc-sapphire.unique.network`],\n    iconUrls: [`https://ipfs.unique.network/ipfs/Qmd1PGt4cDRjFbh4ihP5QKEd4XQVwN1MkebYKdF56V74pf`],\n    blockExplorerUrls: [\"https://uniquescan.io/sapphire/\"]\n  }\n};\nvar addChain = {\n  unique: () => addChainToExtension(UNIQUE_CHAINS_DATA_FOR_EXTENSIONS.unique),\n  quartz: () => addChainToExtension(UNIQUE_CHAINS_DATA_FOR_EXTENSIONS.quartz),\n  opal: () => addChainToExtension(UNIQUE_CHAINS_DATA_FOR_EXTENSIONS.opal),\n  sapphire: () => addChainToExtension(UNIQUE_CHAINS_DATA_FOR_EXTENSIONS.sapphire),\n  anyChain: (chainData) => addChainToExtension(chainData),\n  byName: (chainName) => {\n    if (!UNIQUE_CHAINS.includes(chainName)) {\n      throw new Error(`Invalid chain name: ${chainName}`);\n    }\n    return addChainToExtension(UNIQUE_CHAINS_DATA_FOR_EXTENSIONS[chainName]);\n  }\n};\nvar switchToChain = async (chainId) => {\n  const windowIsOk = await documentReadyPromiseAndWindowIsOk();\n  if (!windowIsOk)\n    return;\n  const parsedChainId = typeof chainId === \"string\" ? chainId : \"0x\" + chainId.toString(16);\n  await window.ethereum.request({ method: \"wallet_switchEthereumChain\", params: [{ chainId: parsedChainId }] });\n};\nvar switchChainTo = {\n  unique: () => switchToChain(chainNameToChainId.unique),\n  quartz: () => switchToChain(chainNameToChainId.quartz),\n  opal: () => switchToChain(chainNameToChainId.opal),\n  sapphire: () => switchToChain(chainNameToChainId.sapphire),\n  anyChain: (chainId) => switchToChain(chainId),\n  byName: (chainName) => {\n    if (!UNIQUE_CHAINS.includes(chainName)) {\n      throw new Error(`Invalid chain name: ${chainName}`);\n    }\n    return switchToChain(chainNameToChainId[chainName]);\n  }\n};\nvar subscribeOnChanges = (cb) => {\n  if (typeof window === \"undefined\" || !window.ethereum) {\n    return () => void 0;\n  }\n  const ethereum = window.ethereum;\n  const refresh = (reason) => {\n    if (ethereum.chainId && ethereum.selectedAddress) {\n      cb({ reason, address: ethereum.selectedAddress, chainId: parseInt(ethereum.chainId, 16) });\n    } else {\n      getAccounts().then(({ chainId, address }) => {\n        cb({ reason, chainId, address });\n      }).catch((e) => console.error(`Error during attempt to update account info in subscribeOnChanges`, e));\n    }\n  };\n  ethereum.on(\"accountsChanged\", () => {\n    refresh(\"account\");\n  });\n  ethereum.on(\"chainChanged\", () => {\n    refresh(\"chain\");\n  });\n  return () => {\n    ethereum.removeListener(\"accountsChanged\", refresh);\n    ethereum.removeListener(\"networkChanged\", refresh);\n  };\n};\nvar parseEthersTxReceipt = (tx, options = { decimals: 18 }) => {\n  const events = (tx.events || []).filter((event) => !!event.event).map((event, index) => {\n    const args = event.args;\n    return {\n      name: event.event || `event_${index.toString().padStart(4, \"0\")}`,\n      // args: event.args!,\n      events: !args ? {} : Object.keys(args).filter((key) => isNaN(parseInt(key))).reduce((acc, key) => {\n        const rawValue = args[key];\n        const value = typeof rawValue === \"object\" && rawValue?._isBigNumber ? rawValue.toBigInt() : rawValue;\n        acc[key] = value;\n        return acc;\n      }, {})\n    };\n  }).reduce((acc, elem) => {\n    acc[elem.name] = elem.events;\n    return acc;\n  }, {});\n  const rawPrice = tx.gasUsed.toBigInt() * tx.effectiveGasPrice.toBigInt();\n  const priceStr = rawPrice.toString().padStart(options.decimals + 1, \"0\");\n  const price = parseFloat([priceStr.slice(0, -options.decimals), \".\", priceStr.slice(-options.decimals)].join(\"\"));\n  return {\n    get tx() {\n      return tx;\n    },\n    from: tx.from,\n    to: tx.to,\n    rawPrice,\n    price,\n    rawEvents: tx.events || [],\n    events,\n    gasUsed: tx.gasUsed.toBigInt(),\n    cumulativeGasUsed: tx.cumulativeGasUsed.toBigInt(),\n    effectiveGasPrice: tx.effectiveGasPrice.toBigInt()\n  };\n};\nvar requestAccounts = () => getOrRequestAccounts(true);\nvar getAccounts = () => getOrRequestAccounts();\nvar Ethereum = {\n  getOrRequestAccounts,\n  getOrRequestAccountsSafe,\n  requestAccounts,\n  getAccounts,\n  requestAccountsSafe: () => getOrRequestAccountsSafe(true),\n  getAccountsSafe: () => getOrRequestAccountsSafe(),\n  subscribeOnChanges,\n  chainNameToChainId,\n  chainIdToChainName,\n  currentChainIs,\n  addChain,\n  switchChainTo,\n  UNIQUE_CHAINS_DATA_FOR_EXTENSIONS,\n  UNIQUE_CHAINS,\n  UNIQUE_CHAIN_IDS,\n  UniqueChainName,\n  parseEthersTxReceipt\n};\n\n// src/ExtensionTools/polkadot.ts\nvar IPFS_GATEWAY = \"https://gateway.pinata.cloud/ipfs/\";\nvar KNOWN_POLKADOT_EXTENSIONS = {\n  \"polkadot-js\": {\n    logoIpfsCid: \"QmYWczavyNyh3yM56axyyQLgRqcFQYNKe5cDFPfLL94yrz\",\n    prettyName: \"Polkadot{.js}\",\n    webpage: \"https://polkadot.js.org/extension/\"\n  },\n  \"subwallet-js\": {\n    logoIpfsCid: \"QmZ8BvFzGL5DRugJ3pytc1Jo1rTVYjW3mKUWBx7SvaEsdS\",\n    prettyName: \"Subwallet\",\n    webpage: \"https://subwallet.app/\"\n  },\n  \"talisman\": {\n    logoIpfsCid: \"QmWHn4kVoG43U5coNhoR7Ec3Vus5YPjo9SkMvoiiLoy2bY\",\n    prettyName: \"Talisman\",\n    webpage: \"https://talisman.xyz/\"\n  }\n};\nvar FALLBACK_WALLET_LOGO_IPFS_CID = \"QmSC1B9X9ugWkfHKtd5guKTidh2qjvgdn8xXzbFrrHMiBM\";\nvar compareTwoStrings = (a, b) => a > b ? 1 : a < b ? -1 : 0;\nvar knownPolkadotExtensions = Object.entries(KNOWN_POLKADOT_EXTENSIONS).map(([name, info]) => {\n  return {\n    name,\n    prettyName: info.prettyName,\n    logo: {\n      ipfsCid: info.logoIpfsCid,\n      url: IPFS_GATEWAY + info.logoIpfsCid\n    },\n    webpage: info.webpage\n  };\n}).sort((a, b) => compareTwoStrings(a.name, b.name));\nvar isWeb3Environment = async () => {\n  const windowIsOk = await documentReadyPromiseAndWindowIsOk();\n  if (!windowIsOk) {\n    return false;\n  }\n  const injectedWeb3 = window.injectedWeb3;\n  return !!injectedWeb3 && Object.keys(injectedWeb3).length !== 0;\n};\nvar getWalletInfo = (walletName, nonInjectedWallet) => {\n  const isEnabled = nonInjectedWallet.isEnabled;\n  const prettyName = KNOWN_POLKADOT_EXTENSIONS[walletName]?.prettyName || walletName;\n  const logo = {\n    ipfsCid: KNOWN_POLKADOT_EXTENSIONS[walletName]?.logoIpfsCid || FALLBACK_WALLET_LOGO_IPFS_CID,\n    url: IPFS_GATEWAY + (KNOWN_POLKADOT_EXTENSIONS[walletName]?.logoIpfsCid || FALLBACK_WALLET_LOGO_IPFS_CID)\n  };\n  return {\n    name: walletName,\n    version: nonInjectedWallet.version,\n    prettyName,\n    logo,\n    isEnabled\n  };\n};\nvar listWallets = async () => {\n  if (!await isWeb3Environment()) {\n    return { wallets: [], info: { extensionFound: false, enabledWalletsNumber: 0 } };\n  }\n  const walletsArray = Object.entries(window.injectedWeb3);\n  const wallets = walletsArray.map(([name, injectedWallet]) => getWalletInfo(name, injectedWallet));\n  return {\n    wallets,\n    info: {\n      extensionFound: true,\n      enabledWalletsNumber: wallets.reduce((acc, wallet) => acc + (wallet.isEnabled ? 1 : 0), 0)\n    }\n  };\n};\nvar loadWalletByNameSafe = async (walletName) => {\n  if (!await isWeb3Environment()) {\n    return { result: null, error: new Error(`now injected web3 found or environment not a browser`) };\n  }\n  const injectedWeb3 = window.injectedWeb3;\n  const rawWallet = injectedWeb3[walletName];\n  if (!rawWallet) {\n    return { result: null, error: new Error(`Wallet with name ${walletName} not found in \"window.injectedWeb3\"`) };\n  }\n  try {\n    const walletInfo = getWalletInfo(walletName, rawWallet);\n    const wallet = await rawWallet.enable();\n    const accounts = await wallet.accounts.get();\n    const parsedWallet = {\n      ...walletInfo,\n      ...wallet,\n      accounts: accounts.map((account) => {\n        const address = account.address;\n        const addressShort = `${address.slice(0, 5)}...${address.slice(-5)}`;\n        const id = `${walletName}/${address}`;\n        const accountName = account.name || `${walletName}/${addressShort}`;\n        const accountType = account.type || \"sr25519\";\n        const signRaw = async (payloadRaw) => {\n          if (!wallet.signer.signRaw) {\n            throw new Error(`no signRaw in the wallet ${walletName}`);\n          }\n          const payload = typeof payloadRaw === \"string\" ? { address, data: payloadRaw, type: \"bytes\" } : { address, ...payloadRaw, type: payloadRaw.type || \"bytes\" };\n          return wallet.signer.signRaw(payload);\n        };\n        const signPayload = async (payloadJSON) => {\n          if (!wallet.signer.signPayload) {\n            throw new Error(`no signPayload in the wallet ${walletName}`);\n          }\n          return wallet.signer.signPayload({ address, ...payloadJSON });\n        };\n        const signer = {\n          address,\n          sign: async (unsignedTxPayload) => {\n            const signatureResult = await signPayload(unsignedTxPayload.signerPayloadJSON);\n            return {\n              signatureType: accountType,\n              signature: signatureResult.signature\n            };\n          }\n        };\n        const enhancedAccount = {\n          ...account,\n          name: accountName,\n          id,\n          address,\n          addressShort,\n          type: accountType,\n          meta: {\n            genesisHash: account.genesisHash || null,\n            name: accountName,\n            source: walletName\n          },\n          wallet: walletInfo,\n          signRaw,\n          signPayload,\n          update: wallet.signer.update,\n          signer\n        };\n        return enhancedAccount;\n      })\n    };\n    return { result: parsedWallet, error: null };\n  } catch (e) {\n    return { result: null, error: e };\n  }\n};\nvar loadWalletByName = async (walletName) => {\n  const { result, error } = await loadWalletByNameSafe(walletName);\n  if (error) {\n    throw error;\n  }\n  return result;\n};\nvar loadWallets = async (onlyEnabled = false) => {\n  if (!await documentReadyPromiseAndWindowIsOk()) {\n    return { wallets: [], accounts: [], rejectedWallets: [] };\n  }\n  if (!await isWeb3Environment()) {\n    const error = new Error(`No injected web3 found`);\n    error.extensionNotFound = true;\n    error.accountsNotFound = false;\n    error.userHasWalletsButHasNoAccounts = false;\n    error.userHasBlockedAllWallets = false;\n    throw error;\n  }\n  const allWallets = await Promise.all(\n    (await listWallets()).wallets.filter((wallet) => !onlyEnabled || wallet.isEnabled).map(async (wallet) => ({\n      info: wallet,\n      enabled: await loadWalletByNameSafe(wallet.name)\n    }))\n  );\n  const wallets = allWallets.filter((wallet) => !!wallet.enabled.result).map((wallet) => wallet.enabled.result).sort((a, b) => compareTwoStrings(a.name, b.name));\n  const rejectedWallets = allWallets.filter((wallet) => !!wallet.enabled.error).map((wallet) => {\n    const error = wallet.enabled.error;\n    const result = {\n      ...wallet.info,\n      error,\n      isBlockedByUser: error.message.indexOf(\"is not allowed to interact with this extension\") >= 0\n    };\n    return result;\n  }).sort((a, b) => compareTwoStrings(a.name, b.name));\n  const accounts = wallets.flatMap((wallet) => wallet.accounts).sort(\n    (a, b) => compareTwoStrings(a.wallet.name + a.name + a.address, b.wallet.name + b.name + b.address)\n  );\n  if (!accounts.length) {\n    const error = new Error(`No accounts found`);\n    error.extensionNotFound = false;\n    error.accountsNotFound = true;\n    error.userHasWalletsButHasNoAccounts = !!wallets.length;\n    error.userHasBlockedAllWallets = !wallets.length && !!rejectedWallets.length && rejectedWallets.every((w) => w.isBlockedByUser);\n    throw error;\n  }\n  return {\n    wallets,\n    rejectedWallets,\n    accounts\n  };\n};\nvar loadWalletsSafe = async (onlyEnabled = false) => {\n  try {\n    return { result: await loadWallets(onlyEnabled), error: null };\n  } catch (e) {\n    return { result: null, error: e };\n  }\n};\nvar Polkadot = {\n  listWallets,\n  enableAndLoadAllWallets: () => loadWallets(false),\n  loadEnabledWallets: () => loadWallets(true),\n  enableAndLoadAllWalletsSafe: () => loadWalletsSafe(false),\n  loadEnabledWalletsSafe: () => loadWalletsSafe(true),\n  loadWalletByName,\n  loadWalletByNameSafe,\n  constants: {\n    knownPolkadotExtensions,\n    extensionNames: {\n      polkadot: \"polkadot-js\",\n      subwallet: \"subwallet-js\",\n      talisman: \"talisman\"\n    }\n  }\n};\n\n// src/ExtensionTools/index.ts\nvar ExtensionTools = {\n  Ethereum,\n  Polkadot\n};\nvar UniqueChainName2 = Ethereum.UniqueChainName;\nvar ExtensionTools_default = ExtensionTools;\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  Ethereum,\n  ExtensionTools,\n  Polkadot,\n  UniqueChainName\n});\n//# sourceMappingURL=extension.js.map","export * from '@unique-nft/utils/extension';\n"]}