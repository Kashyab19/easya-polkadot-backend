(function () {
	'use strict';

	var J=Object.create;var W=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var ee=Object.getPrototypeOf,te=Object.prototype.hasOwnProperty;var i=(e,t)=>W(e,"name",{value:t,configurable:!0});var ne=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var U=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Z(t))!te.call(e,s)&&s!==n&&W(e,s,{get:()=>t[s],enumerable:!(o=V(t,s))||o.enumerable});return e},O=(e,t,n)=>(U(e,t,"default"),n&&U(n,t,"default")),re=(e,t,n)=>(n=e!=null?J(ee(e)):{},U(t||!e||!e.__esModule?W(n,"default",{value:e,enumerable:!0}):n,e));var M=ne((Ce,D)=>{var P=Object.defineProperty,ae=Object.getOwnPropertyDescriptor,se=Object.getOwnPropertyNames,oe=Object.prototype.hasOwnProperty,ie=i((e,t)=>{for(var n in t)P(e,n,{get:t[n],enumerable:!0});},"__export"),ue=i((e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of se(t))!oe.call(e,s)&&s!==n&&P(e,s,{get:()=>t[s],enumerable:!(o=ae(t,s))||o.enumerable});return e},"__copyProps"),le=i(e=>ue(P({},"__esModule",{value:!0}),e),"__toCommonJS"),B={};ie(B,{Ethereum:()=>j,ExtensionTools:()=>K,Polkadot:()=>$,UniqueChainName:()=>qe,default:()=>Ie});D.exports=le(B);var v=i(()=>typeof window>"u"?Promise.resolve(!1):window.document.readyState==="complete"?Promise.resolve(!0):new Promise(e=>window.addEventListener("load",()=>e(!0),{once:!0})),"documentReadyPromiseAndWindowIsOk"),ce=i(()=>typeof window<"u"&&!!window.ethereum,"windowIsOkSync"),g=["unique","quartz","opal","sapphire"],Q=[8880,8881,8882,8883],de={unique:"unique",quartz:"quartz",opal:"opal",sapphire:"sapphire"},w={unique:8880,quartz:8881,opal:8882,sapphire:8883},pe={8880:"unique",8881:"quartz",8882:"opal",8883:"sapphire"},y=i(e=>()=>ce()?parseInt(window.ethereum.chainId,16)===w[e]:!1,"isUniqueChainFactory"),we={unique:y("unique"),quartz:y("quartz"),opal:y("opal"),sapphire:y("sapphire"),byName:e=>{if(!g.includes(e))throw new Error(`Invalid chain name: ${e}`);return y(e)()},anyUniqueChain:e=>e?typeof e=="string"&&g.includes(e)||typeof e=="number"&&Q.includes(e):!1},N=i(async(e=!1)=>{if(!await v())return {address:"",chainId:0};if(!window.ethereum){let a=new Error("No extension found");throw a.extensionNotFound=!0,a.userRejected=!1,a.needToRequestAccess=!1,a.chainId=null,a}let n=window.ethereum,o=[],s=null;try{o=await n.request({method:e?"eth_requestAccounts":"eth_accounts"}),s=parseInt(n.chainId,16);}catch(a){let u=a;u.userRejected=a.code===4001,u.extensionNotFound=!1,u.needToRequestAccess=!1;let l=window.ethereum?.chainId;throw u.chainId=typeof l=="string"?parseInt(l,16):NaN,u}if(!o[0]){let a=new Error("Need to request account");throw a.extensionNotFound=!1,a.userRejected=!1,a.needToRequestAccess=!0,a.chainId=s,a}return {address:o[0],chainId:s}},"getOrRequestAccounts"),A=i(async(e=!1)=>{try{return {result:await N(e),error:null}}catch(t){return {result:null,error:t}}},"getOrRequestAccountsSafe"),h=i(async e=>{if(!await v())return;let n=window.ethereum;if(n.chainId===e.chainId){console.log(`No need to add the chain to wallet - wallet already has ${e.chainName}'s chainId: ${n.chainId} (${parseInt(n.chainId)})`);return}try{await n.request({method:"wallet_addEthereumChain",params:[e]});}catch(o){throw console.error("Error during attempt to add chain to wallet",o.code,o),o}},"addChainToExtension"),m={unique:{chainId:"0x22b0",chainName:"Unique",nativeCurrency:{name:"Unique",symbol:"UNQ",decimals:18},rpcUrls:["https://rpc.unique.network"],iconUrls:["https://ipfs.unique.network/ipfs/QmbJ7CGZ2GxWMp7s6jy71UGzRsMe4w3KANKXDAExYWdaFR"],blockExplorerUrls:["https://uniquescan.io/unique/"]},quartz:{chainId:"0x22b1",chainName:"Quartz by Unique",nativeCurrency:{name:"Quartz",symbol:"QTZ",decimals:18},rpcUrls:["https://rpc-quartz.unique.network"],iconUrls:["https://ipfs.unique.network/ipfs/QmaGPdccULQEFcCGxzstnmE8THfac2kSiGwvWRAiaRq4dp"],blockExplorerUrls:["https://uniquescan.io/quartz/"]},opal:{chainId:"0x22b2",chainName:"Opal by Unique",nativeCurrency:{name:"Opal",symbol:"OPL",decimals:18},rpcUrls:["https://rpc-opal.unique.network"],iconUrls:["https://ipfs.unique.network/ipfs/QmYJDpmWyjDa3H6BxweFmQXk4fU8b1GU7M9EqYcaUNvXzc"],blockExplorerUrls:["https://uniquescan.io/opal/"]},sapphire:{chainId:"0x22b3",chainName:"Sapphire by Unique",nativeCurrency:{name:"Quartz",symbol:"QTZ",decimals:18},rpcUrls:["https://rpc-sapphire.unique.network"],iconUrls:["https://ipfs.unique.network/ipfs/Qmd1PGt4cDRjFbh4ihP5QKEd4XQVwN1MkebYKdF56V74pf"],blockExplorerUrls:["https://uniquescan.io/sapphire/"]}},he={unique:()=>h(m.unique),quartz:()=>h(m.quartz),opal:()=>h(m.opal),sapphire:()=>h(m.sapphire),anyChain:e=>h(e),byName:e=>{if(!g.includes(e))throw new Error(`Invalid chain name: ${e}`);return h(m[e])}},f=i(async e=>{if(!await v())return;let n=typeof e=="string"?e:"0x"+e.toString(16);await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:n}]});},"switchToChain"),fe={unique:()=>f(w.unique),quartz:()=>f(w.quartz),opal:()=>f(w.opal),sapphire:()=>f(w.sapphire),anyChain:e=>f(e),byName:e=>{if(!g.includes(e))throw new Error(`Invalid chain name: ${e}`);return f(w[e])}},me=i(e=>{if(typeof window>"u"||!window.ethereum)return ()=>{};let t=window.ethereum,n=i(o=>{t.chainId&&t.selectedAddress?e({reason:o,address:t.selectedAddress,chainId:parseInt(t.chainId,16)}):R().then(({chainId:s,address:r})=>{e({reason:o,chainId:s,address:r});}).catch(s=>console.error("Error during attempt to update account info in subscribeOnChanges",s));},"refresh");return t.on("accountsChanged",()=>{n("account");}),t.on("chainChanged",()=>{n("chain");}),()=>{t.removeListener("accountsChanged",n),t.removeListener("networkChanged",n);}},"subscribeOnChanges"),ye=i((e,t={decimals:18})=>{let n=(e.events||[]).filter(a=>!!a.event).map((a,u)=>{let l=a.args;return {name:a.event||`event_${u.toString().padStart(4,"0")}`,events:l?Object.keys(l).filter(d=>isNaN(parseInt(d))).reduce((d,b)=>{let p=l[b],q=typeof p=="object"&&p?._isBigNumber?p.toBigInt():p;return d[b]=q,d},{}):{}}}).reduce((a,u)=>(a[u.name]=u.events,a),{}),o=e.gasUsed.toBigInt()*e.effectiveGasPrice.toBigInt(),s=o.toString().padStart(t.decimals+1,"0"),r=parseFloat([s.slice(0,-t.decimals),".",s.slice(-t.decimals)].join(""));return {get tx(){return e},from:e.from,to:e.to,rawPrice:o,price:r,rawEvents:e.events||[],events:n,gasUsed:e.gasUsed.toBigInt(),cumulativeGasUsed:e.cumulativeGasUsed.toBigInt(),effectiveGasPrice:e.effectiveGasPrice.toBigInt()}},"parseEthersTxReceipt"),ge=i(()=>N(!0),"requestAccounts"),R=i(()=>N(),"getAccounts"),j={getOrRequestAccounts:N,getOrRequestAccountsSafe:A,requestAccounts:ge,getAccounts:R,requestAccountsSafe:()=>A(!0),getAccountsSafe:()=>A(),subscribeOnChanges:me,chainNameToChainId:w,chainIdToChainName:pe,currentChainIs:we,addChain:he,switchChainTo:fe,UNIQUE_CHAINS_DATA_FOR_EXTENSIONS:m,UNIQUE_CHAINS:g,UNIQUE_CHAIN_IDS:Q,UniqueChainName:de,parseEthersTxReceipt:ye},L="https://gateway.pinata.cloud/ipfs/",I={"polkadot-js":{logoIpfsCid:"QmYWczavyNyh3yM56axyyQLgRqcFQYNKe5cDFPfLL94yrz",prettyName:"Polkadot{.js}",webpage:"https://polkadot.js.org/extension/"},"subwallet-js":{logoIpfsCid:"QmZ8BvFzGL5DRugJ3pytc1Jo1rTVYjW3mKUWBx7SvaEsdS",prettyName:"Subwallet",webpage:"https://subwallet.app/"},talisman:{logoIpfsCid:"QmWHn4kVoG43U5coNhoR7Ec3Vus5YPjo9SkMvoiiLoy2bY",prettyName:"Talisman",webpage:"https://talisman.xyz/"}},z="QmSC1B9X9ugWkfHKtd5guKTidh2qjvgdn8xXzbFrrHMiBM",E=i((e,t)=>e>t?1:e<t?-1:0,"compareTwoStrings"),ve=Object.entries(I).map(([e,t])=>({name:e,prettyName:t.prettyName,logo:{ipfsCid:t.logoIpfsCid,url:L+t.logoIpfsCid},webpage:t.webpage})).sort((e,t)=>E(e.name,t.name)),S=i(async()=>{if(!await v())return !1;let t=window.injectedWeb3;return !!t&&Object.keys(t).length!==0},"isWeb3Environment"),G=i((e,t)=>{let n=t.isEnabled,o=I[e]?.prettyName||e,s={ipfsCid:I[e]?.logoIpfsCid||z,url:L+(I[e]?.logoIpfsCid||z)};return {name:e,version:t.version,prettyName:o,logo:s,isEnabled:n}},"getWalletInfo"),H=i(async()=>{if(!await S())return {wallets:[],info:{extensionFound:!1,enabledWalletsNumber:0}};let t=Object.entries(window.injectedWeb3).map(([n,o])=>G(n,o));return {wallets:t,info:{extensionFound:!0,enabledWalletsNumber:t.reduce((n,o)=>n+(o.isEnabled?1:0),0)}}},"listWallets"),x=i(async e=>{if(!await S())return {result:null,error:new Error("now injected web3 found or environment not a browser")};let n=window.injectedWeb3[e];if(!n)return {result:null,error:new Error(`Wallet with name ${e} not found in "window.injectedWeb3"`)};try{let o=G(e,n),s=await n.enable(),r=await s.accounts.get();return {result:{...o,...s,accounts:r.map(u=>{let l=u.address,d=`${l.slice(0,5)}...${l.slice(-5)}`,b=`${e}/${l}`,p=u.name||`${e}/${d}`,q=u.type||"sr25519",Y=i(async c=>{if(!s.signer.signRaw)throw new Error(`no signRaw in the wallet ${e}`);let k=typeof c=="string"?{address:l,data:c,type:"bytes"}:{address:l,...c,type:c.type||"bytes"};return s.signer.signRaw(k)},"signRaw"),T=i(async c=>{if(!s.signer.signPayload)throw new Error(`no signPayload in the wallet ${e}`);return s.signer.signPayload({address:l,...c})},"signPayload"),X={address:l,sign:async c=>{let k=await T(c.signerPayloadJSON);return {signatureType:q,signature:k.signature}}};return {...u,name:p,id:b,address:l,addressShort:d,type:q,meta:{genesisHash:u.genesisHash||null,name:p,source:e},wallet:o,signRaw:Y,signPayload:T,update:s.signer.update,signer:X}})},error:null}}catch(o){return {result:null,error:o}}},"loadWalletByNameSafe"),be=i(async e=>{let{result:t,error:n}=await x(e);if(n)throw n;return t},"loadWalletByName"),_=i(async(e=!1)=>{if(!await v())return {wallets:[],accounts:[],rejectedWallets:[]};if(!await S()){let r=new Error("No injected web3 found");throw r.extensionNotFound=!0,r.accountsNotFound=!1,r.userHasWalletsButHasNoAccounts=!1,r.userHasBlockedAllWallets=!1,r}let t=await Promise.all((await H()).wallets.filter(r=>!e||r.isEnabled).map(async r=>({info:r,enabled:await x(r.name)}))),n=t.filter(r=>!!r.enabled.result).map(r=>r.enabled.result).sort((r,a)=>E(r.name,a.name)),o=t.filter(r=>!!r.enabled.error).map(r=>{let a=r.enabled.error;return {...r.info,error:a,isBlockedByUser:a.message.indexOf("is not allowed to interact with this extension")>=0}}).sort((r,a)=>E(r.name,a.name)),s=n.flatMap(r=>r.accounts).sort((r,a)=>E(r.wallet.name+r.name+r.address,a.wallet.name+a.name+a.address));if(!s.length){let r=new Error("No accounts found");throw r.extensionNotFound=!1,r.accountsNotFound=!0,r.userHasWalletsButHasNoAccounts=!!n.length,r.userHasBlockedAllWallets=!n.length&&!!o.length&&o.every(a=>a.isBlockedByUser),r}return {wallets:n,rejectedWallets:o,accounts:s}},"loadWallets"),F=i(async(e=!1)=>{try{return {result:await _(e),error:null}}catch(t){return {result:null,error:t}}},"loadWalletsSafe"),$={listWallets:H,enableAndLoadAllWallets:()=>_(!1),loadEnabledWallets:()=>_(!0),enableAndLoadAllWalletsSafe:()=>F(!1),loadEnabledWalletsSafe:()=>F(!0),loadWalletByName:be,loadWalletByNameSafe:x,constants:{knownPolkadotExtensions:ve,extensionNames:{polkadot:"polkadot-js",subwallet:"subwallet-js",talisman:"talisman"}}},K={Ethereum:j,Polkadot:$},qe=j.UniqueChainName,Ie=K;});var C={};O(C,re(M(),1));

})();
//# sourceMappingURL=out.js.map
//# sourceMappingURL=extension.js.map