{"version":3,"sources":["../src/ExchangeInfo/index.ts","../src/ExchangeInfo/prices.ts"],"sourcesContent":["export type {IPrice} from './prices'\nimport {getUNQPrice, getQTZPrice} from './prices'\n\nexport const ExchangeInfo = {\n  getQTZPrice,\n  getUNQPrice,\n}\n\nexport default ExchangeInfo\n","const URLS = {\n  QTZ: {\n    mexc: 'https://www.mexc.com/open/api/v2/market/ticker?symbol=QTZ_USDT',\n    mexcCorsProxied: 'https://api.allorigins.win/get?url=https%3A%2F%2Fwww.mexc.com%2Fopen%2Fapi%2Fv2%2Fmarket%2Fticker%3Fsymbol%3DQTZ_USDT',\n  },\n  UNQ: {\n    huobi: 'https://api.huobi.pro/market/detail/merged?symbol=unqusdt',\n  },\n}\n\nconst wrapUrlWithCorsProxy = (url: string) => 'https://corsproxy.io/?' + encodeURIComponent(url)\n\nexport type IPrice = {\n  coin: string\n  avg: number\n  currency: string\n}\n\nexport const getQTZPrice = async (dontUseCORSProxy?: boolean): Promise<IPrice> => {\n  const url = dontUseCORSProxy ? URLS.QTZ.mexc : URLS.QTZ.mexcCorsProxied\n  const response = (await (await fetch(url)).json() as any)\n\n  const result = dontUseCORSProxy\n    ? response.data[0]\n    : JSON.parse(response.contents).data[0]\n\n  const ask = parseFloat(result.ask)\n  const bid = parseFloat(result.ask)\n  const avg = parseFloat(((ask + bid) / 2).toFixed(5))\n  return {\n    coin: 'QTZ',\n    avg,\n    currency: 'USDT',\n  }\n}\n\nexport const getUNQPrice = async (): Promise<IPrice> => {\n  const result = (await (await fetch(URLS.UNQ.huobi)).json() as any).tick\n  const ask = result.ask[0]\n  const bid = result.bid[0]\n  const avg = parseFloat(((ask + bid) / 2).toFixed(5))\n  return {\n    coin: 'UNQ',\n    avg,\n    currency: 'USDT',\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,IAAM,OAAO;AAAA,EACX,KAAK;AAAA,IACH,MAAM;AAAA,IACN,iBAAiB;AAAA,EACnB;AAAA,EACA,KAAK;AAAA,IACH,OAAO;AAAA,EACT;AACF;AAUO,IAAM,cAAc,OAAO,qBAAgD;AAChF,QAAM,MAAM,mBAAmB,KAAK,IAAI,OAAO,KAAK,IAAI;AACxD,QAAM,WAAY,OAAO,MAAM,MAAM,GAAG,GAAG,KAAK;AAEhD,QAAM,SAAS,mBACX,SAAS,KAAK,CAAC,IACf,KAAK,MAAM,SAAS,QAAQ,EAAE,KAAK,CAAC;AAExC,QAAM,MAAM,WAAW,OAAO,GAAG;AACjC,QAAM,MAAM,WAAW,OAAO,GAAG;AACjC,QAAM,MAAM,aAAa,MAAM,OAAO,GAAG,QAAQ,CAAC,CAAC;AACnD,SAAO;AAAA,IACL,MAAM;AAAA,IACN;AAAA,IACA,UAAU;AAAA,EACZ;AACF;AAEO,IAAM,cAAc,YAA6B;AACtD,QAAM,UAAU,OAAO,MAAM,MAAM,KAAK,IAAI,KAAK,GAAG,KAAK,GAAU;AACnE,QAAM,MAAM,OAAO,IAAI,CAAC;AACxB,QAAM,MAAM,OAAO,IAAI,CAAC;AACxB,QAAM,MAAM,aAAa,MAAM,OAAO,GAAG,QAAQ,CAAC,CAAC;AACnD,SAAO;AAAA,IACL,MAAM;AAAA,IACN;AAAA,IACA,UAAU;AAAA,EACZ;AACF;;;AD3CO,IAAM,eAAe;AAAA,EAC1B;AAAA,EACA;AACF;AAEA,IAAO,uBAAQ;","names":[]}